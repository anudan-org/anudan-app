<div class="container text-left mt-5 px-5 py-5">
  <div *ngIf="currentGrant.actionAuthorities.permissions.includes('VIEW')">
    <a class="btn btn-sm btn-outline-secondary" (click)="appComp.goToHome()"><i
        class="fa fa-home mr-2"></i>Home</a>
    <div class="row">
      <ng-container *ngFor="let section of currentGrant.grantDetails.sections">
        <div class="col-sm-6">
          <div class="row">
            <div class="col-sm-12 bg-primary text-white p-2">
              <strong>{{section.name.toLocaleUpperCase()}}</strong></div>
            <div class="col-sm-12">
              <ng-container *ngFor="let attribute of section.attribute">
                <div class="row">
                  <ng-container *ngIf="attribute.fieldType=='string'">
                    <div class="col-sm-12 col-lg-6"><i class="fa fa-square-o mr-2"></i><b
                        class="">{{attribute.fieldName}}</b></div>
                    <div class="col-sm-12 col-lg-6 text-left"><span>{{attribute.fieldValue}}</span>
                    </div>
                  </ng-container>
                  <ng-container *ngIf="attribute.fieldType=='document'">
                    <div class="col-sm-12 col-lg-12"><a href="/api/app/grants/{{currentGrant.id}}/file/{{attribute.fieldName}}"><b
                        class="">{{attribute.fieldName}}</b></a>
                    </div>
                  </ng-container>
                </div>
              </ng-container>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
    <span class="badge badge-success">{{currentGrant.grantStatus.displayName}}</span>/<span
      class="badge badge-dark text-white">{{currentGrant.substatus.displayName}}</span>
    <hr>
    <div class="btn-group">
      <div *ngFor="let flow of currentGrant.flowAuthority">
        <button class="btn btn-sm btn-success"
                id="{{flow.action}}">{{flow.action}}</button>
      </div>
    </div>
    <div class="accordion" id="accordionExample">
      <ng-container *ngFor="let submission of currentGrant.submissions">
        <div class="card mb-0">
          <div class="card-header" id="heading_{{submission.id}}">
            <div class="row">
              <div class="col-sm-9">
                <b class="mb-0 submission-header">

                  <div data-toggle="collapse" [attr.data-target]="'#collapse_'+submission.id">
                    Submission
                    for {{submission.title}} | Submit By: {{submission.submitBy | date}} |
                    Status: {{submission.submissionStatus.displayName}}</div>
                </b>
              </div>
              <div class="col-sm-3 text-right">
                <button *ngIf="submission.flowAuthorities" class="btn btn-sm btn-primary"
                        (click)="viewKpisToSubmit(submission.id)">View Submissions
                </button>
              </div>
            </div>
          </div>
        </div>
        <div id="collapse_{{submission.id}}" class="collapse"
             [attr.aria-labelledby]="'heading_'+submission.id"
             data-parent="#accordionExample">
          <div class="card-body">
            <div *ngFor="let quantKpi of submission.quantitiaveKpisubmissions">

              <div class="row border-bottom">
                <div class="col-sm-8 submission-title"><b>{{quantKpi.grantKpi.title}}</b></div>
                <div class="col-sm-2 text-center">
                  <circle-progress
                      [backgroundStrokeWidth]="5"
                      [percent]="quantKpi.actuals * 100 / quantKpi.goal"
                      [backgroundPadding]="0"
                      [radius]="40"
                      [space]="-1"
                      [outerStrokeWidth]="10"
                      [outerStrokeColor]="'#3de033'"
                      [outerStrokeLinecap]="'square'"
                      [innerStrokeColor]="'#828282'"
                      [titleFontSize]="15"
                      [animateTitle]=false
                      [title]="[quantKpi.actuals]"
                      [animationDuration]="100"
                      [subtitle]="['---',quantKpi.goal]"
                      [showUnits]=false
                  ></circle-progress>
                </div>
              </div>
            </div>
            <div *ngFor="let qualKpi of submission.qualitativeKpiSubmissions">
              <div class="row">
                <div class="col-sm-12"><b>{{qualKpi.grantKpi.title}}</b></div>
                <div class="col-sm-12 mb-5 border-left">{{qualKpi.actuals}}</div>
              </div>
            </div>
            <div *ngFor="let docKpi of submission.documentKpiSubmissions">
              <div class="row">
                <div class="col-sm-12"><b>{{docKpi.grantKpi.title}}</b></div>
                <div class="col-sm-12 mb-5">
                  <ng-container *ngFor="let doc of docKpi.submissionDocs">
                    <a target="_blank"
                       href="/api/submission/{{submission.id}}/kpi/{{docKpi.grantKpi.id}}/file/{{doc.id}}">
                      <p>
                        <i *ngIf="doc.fileType==='pdf'"
                           class="fa fa-2x fa-file-pdf-o text-rose"></i>
                        <i *ngIf="doc.fileType==='jpg'" class="fa fa-2x fa-file-image-o"></i>
                        <i *ngIf="doc.fileType==='jpeg'" class="fa fa-2x fa-file-image-o"></i>
                        <i *ngIf="doc.fileType==='png'" class="fa fa-2x fa-file-image-o"></i>
                        <i *ngIf="doc.fileType==='doc'" class="fa fa-2x fa-file"></i>
                        {{doc.fileName}}
                      </p>
                    </a>
                  </ng-container>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>

    </div>
  </div>

  <div *ngIf="currentGrant.actionAuthorities.permissions.includes('MANAGE')">

  </div>
</div>




